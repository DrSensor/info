---
title: Hello World
sidebar_position: 1
---

import {IfcCard} from "../../../../src/components/Card/InfoCard";

## üößüë∑‚Äç‚ôÄÔ∏è Under construction üë∑‚Äç‚ôÇÔ∏èüöß

<IfcCard icon="üíô" title="Thanks for your interest in IFC.js!">
    We are building this section of the documentation right now. In the meantime, you can join the <a href="https://discord.gg/FXfyR4XrKT">Discord channel</a> and ask us any questions you need to implement IFC.js or to join the project.
</IfcCard>

## Introduction

  ‚ö°
Creating a BIM application with IFC.js is very easy. You can find the complete project of the guide [here](https://github.com/IFCjs/hello-world/tree/main/examples/web-ifc/ifc-to-json/frontend) or [here](https://github.com/IFCjs/hello-world/tree/main/examples/web-ifc/ifc-to-json/node) and the deployed application [here](https://ifcjs.github.io/hello-world/examples/web-ifc/ifc-to-json/frontend). You only need to have <a href="https://nodejs.org/en/">Node.js</a> and any IDE installed to follow the steps below. Also, if you don't have any IFC files to follow along, you can get some [here](https://github.com/IFCjs/test-ifc-files).

  <IfcAlert>
Using IFC.js requires a basic knowledge of JavaScript. If you have no previous experience with JavaScript, you can learn more on [javascript.info](https://javascript.info) or [MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript).
  </IfcAlert>

You might be wondering why use `web-ifc` if there is `web-ifc-viewer` and `web-ifc-three`. As stated in the [Introduction](../Introduction.mdx), `web-ifc` is **lightest** and **most flexible** module of IFC.js that **does not implement a 3d viewer**. This means you can run it in non-browser environment like Node.js, Deno, or even Edge Functions as long as they support WebAssembly. Some `web-ifc` use cases are:

* Build SaaS or backend service that analyze, convert, or modify IFC file
* Integrate your own custom renderer with `web-ifc` (i.e rendering IFC model as voxel, make interactive floor-plan from IFC files)
* Write automated tests for validating IFC model
* and many more

  üê£
This minimal tutorial will be done with Vanilla JavaScript, without using any backend/frontend frameworks like React, Express, etc. However, the same steps can be adapted and applied to any of these use cases.

## Setting up the project

### Install libraries

  üë©‚Äçüè´
The first thing to do is to create an empty folder and start a new npm project with the command `npm init`. This will generate a `package.json` file containing some data such as the project name, version, commands and dependencies. In addition, the following dependencies must be installed with npm:

```bash
    //Install IFC.js
    npm i web-ifc

    // Install a bundler: we will use rollup.js for this guide
    npm i rollup --save-dev
    npm i @rollup/plugin-node-resolve --save-dev
```

  üìù
The next step is to create an HTML file named `index.html` as the main document of the application. The HTML will have:
- A **button/input element** for opening single IFC file.
- A **div element** on the left that print IFC file content.
- A **div element** on the right for displaying allIFC properties as JSON.

```html
<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="stylesheet" href="styles.css">
      <title>IFC.js</title>
  </head>
  <body>
    <div class="file-opener">
        <button class="basic-button" id="file-opener-button">Open IFC</button>
    </div>
    <input class="invisible" id="file-input" type="file">
    <div class="general-container">
        <div class="container" id="left-container"></div>
        <div class="separator"></div>
        <div class="container" id="right-container"><pre id="json"></pre></div>
    </div>
    <script src="bundle.js"></script>
  </body>
</html>
```
Note that the `<input>` element is invisible.

### Adding style

  üé®
This `style.css` file will properly layout the page:

```css
*{
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html, body {
    overflow: hidden;
    background-color: #F3F4F6;
}

.general-container {
    background-color: white;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    position: absolute;
    margin: 2rem;
    display: flex;
}

.container {
    padding: 1rem;
    flex-grow: 1;
    flex-shrink: 1;
    flex-basis: 0;
    width:50px;
    word-wrap: break-word;
    overflow-y: scroll;
}

.separator {
    border: 2px solid #F3F4F6;
}

.file-opener {
    position: absolute;
    z-index: 1;
    width: 100%;
    display: flex;
    justify-content: flex-end;
    top: 3rem;
    right: 4rem;
}

.basic-button {
    background-color: #F3F4F6;
    padding: 1rem;
    border-radius: 1rem;
    border: none;
    transition: all 0.1s ease-in-out;
    box-shadow: 0 0 0 0 #e6e6e6;
    margin: 1rem;
}

.basic-button:hover {
    background-color: white;
    box-shadow: 0 10px 20px 8px #e6e6e6;
}

.basic-button:active {
    background-color: #F3F4F6;
}

.invisible {
    visibility: collapse;
}
```

### Accessing HTML element in JavaScript

  üìÅ
To accesss all declared element in `index.html`, we need to add this line in the `app.js` file:

```js
const button = document.getElementById("file-opener-button");
button.addEventListener('click', () => input.click());

const leftContainer = document.getElementById("left-container");
const saveButton = document.getElementById("save-button");

const json = document.getElementById("json");
```

Notice that we hook button click event to trigger input click. This will make `<button>` element like file opener.

### Bundling and WebAssembly

üéØüìÅ As for the next steps, you can follow [Hello World](../../Hello%20world.mdx) guide to create `rollup.config.js` files and also copy the necessary `.wasm` files from `node_modules\web-ifc`.

## Loading IFC files

### Loading user's models

  üè†
Finally, we will use `web-ifc` to load IFC files. This can be done by instantiating the `IfcAPI` then pass the loaded IFC file as buffer (bytes in `Uint8Array`) to `OpenModel` method.

#### from browser

  üåê
To accept user's model in the browser, we can create an event for when the user uploads an IFC file to the HTML `<input>` element.

```js
import { IfcAPI } from "web-ifc/web-ifc-api";

const ifcapi = new IfcAPI();

const input = document.getElementById("file-input");
input.addEventListener(
    "change",
    (changed) => {
        const reader = new FileReader();
        reader.onload = () => LoadFile(reader.result);
        reader.readAsText(changed.target.files[0]);
    },
    false
);

async function LoadFile(ifcAsText) {
    leftContainer.innerHTML = ifcAsText.replace(/(?:\r\n|\r|\n)/g, '<br>'); // display the .ifc file content in multi-line format
    const uint8array = new TextEncoder().encode(ifcAsText); // since the model was `readAsText`, we need to encode it as a stream of UTF-8 *bytes*
    const modelID = await OpenIfc(uint8array);
    console.log(modelID)
    ifcapi.CloseModel(modelID);
}

async function OpenIfc(ifcAsText) {
    await ifcapi.Init(); // this will initialize web-ifc.wasm and expose it to JavaScript
    return ifcapi.OpenModel(ifcAsText);
}
```

  üé£
Keep in mind that if you haven't saved the wasm files in the root of served files of the project, you'll need to specify its location with `SetWasmPath`. For instance, if we had them stored in a folder called `wasm` contained in a folder called `static` in the root of the project, we would do the following:

```js
  ifcapi.SetWasmPath("static/wasm/");
```

If you have done everything correctly, you can see the `modelID` of your model in the browser console.

#### from Node.js

  üü¢
In Node.js, the process are more straightforward. We can just read the model from the filesystem.
This approach can be handy if you do quick prototyping or testing some model if it can be loaded correctly.

```js
const WebIFC = require('web-ifc/web-ifc-api-node');
const fs = require("fs");

const ifcapi = new WebIFC.IfcAPI();

async function LoadFile(filename)
{
    const modelID = await OpenIfc(filename);
    console.log(modelID)
    ifcapi.CloseModel(modelID);
}

async function OpenIfc(filename) {
    const ifcData = fs.readFileSync(filename);
    await ifcapi.Init(); // this will initialize web-ifc.wasm and expose it to JavaScript
    return ifcapi.OpenModel(ifcData);
}
```

Now we can ask CLI user from terminal on where to load the IFC file

```js
LoadFile(process.argv[2])
```

then we can run our script by providing the path of the IFC file

```
node main.js assets/mymodel.ifc
```

now it will print the `modelID` of `assets/mymodel.ifc` in the terminal.

### Loading our models

  ü§î
<!-- TODO -->

#### from URL

<!-- TODO -->
Usually this is a use case when you building a web page/app. However, it also useful when you write script or service for processing IFC files from cloud storage like Dropbox/GoogleDrive and Amazon S3.

#### from file system

<!-- TODO -->
Only works on Node.js or Deno.

## Reading all properties

  üîÇ
After we get the `modelID`, we can now display all the properties in JSON format.

```js
function GetAllItems(modelID) {
    const allItems = {};
    const lines = ifcapi.GetAllLines(modelID);
    getAllItemsFromLines(modelID, lines, allItems);
    return allItems;
}

function getAllItemsFromLines(modelID, lines, allItems) {
    for (let i = 1; i <= lines.size(); i++) {
        try {
            saveProperties(modelID, lines, allItems, i);
        } catch (e) {
            console.log(e);
        }
    }
}

function saveProperties(modelID, lines, allItems, index) {
    const itemID = lines.get(index);
    const props = ifcapi.GetLine(modelID, itemID);
    props.type = props.constructor.name;
    allItems[itemID] = props;
}
```
<!-- TODO -->

Now we can integrate it into `LoadFile` function

* for browser

```js
async function LoadFile(ifcAsText) {
    leftContainer.innerHTML = ifcAsText.replace(/(?:\r\n|\r|\n)/g, '<br>');
    const uint8array = new TextEncoder().encode(ifcAsText);
    const modelID = await OpenIfc(uint8array);

    /// read all properties and display it in JSON format ///
    const allItems = GetAllItems(modelID);
    const result = JSON.stringify(allItems, undefined, 2);
    json.textContent  = result;
    //////////////////////////////////////////////////////

    ifcapi.CloseModel(modelID);
}
```

* for Node.js

```js
async function LoadFile(filename)
{
    const modelID = await OpenIfc(filename);

    /// read all properties and save it as ifc-properties.json ///
    const allItems = GetAllItems(modelID);
    fs.writeFileSync('ifc-properties.json', JSON.stringify(allItems));
    //////////////////////////////////////////////////////////////////

    ifcapi.CloseModel(modelID);
}
```

# Conclusion

  üéâ
Congratulations! <!-- TODO -->

  <IfcCard icon="üî•" title="What else can I do with IFC.js?">
<!-- TODO -->
  </IfcCard>

  ‚è©
In the next tutorial we will learn how to query properties.
